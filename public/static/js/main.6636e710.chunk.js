(this["webpackJsonpbeancount-web"]=this["webpackJsonpbeancount-web"]||[]).push([[5],{142:function(e,t,n){},145:function(e,t,n){},170:function(e,t,n){},176:function(e,t,n){},181:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(28),s=n.n(a),i=(n(142),n(20)),c=n(129),l=n.n(c),h=n(95),d=n.n(h),b=(n(144),n(38)),u=(n(145),n(73)),j="\u6211\u7684\u8d26\u672c",m="https://github.com/BaoXuebin/beancount-gs",g="https://www.yuque.com/chuyi-ble7p/beancount-gs",p="https://www.yuque.com/chuyi-ble7p/beancount-gs/og9g7c4lnchon6eu",x="https://github.com/BaoXuebin/beancount-gs/issues",O="https://github.com/BaoXuebin/beancount-gs/blob/main/License",f=n(91),v=n(184),w=n(183),y=(n(170),n(5));class S extends r.Component{constructor(){super(...arguments),this.state={version:"",isModalVisible:!1,error:[]},this.handleOut=()=>{localStorage.clear(),this.setState({error:[]}),window.location.href="/web/#/ledger"},this.openErrorModal=()=>{this.setState({isModalVisible:!0})},this.closeErrorModal=()=>{this.setState({isModalVisible:!1})}}componentDidMount(){Object(f.d)("/api/version").then((e=>{localStorage.setItem("version",e),this.setState({version:e})})),Object(f.d)("/api/auth/ledger/check").then((e=>{this.setState({error:e||[]})}))}render(){let{theme:e}=this.context;const t=window.localStorage.getItem("ledgerTitle")||j;return Object(y.jsx)("div",{className:`${e}-theme page-wrapper`,children:Object(y.jsxs)("div",{className:"wrapper",children:[Object(y.jsx)("header",{children:Object(y.jsx)("nav",{className:"navbar",children:Object(y.jsxs)("div",{className:"container",children:[Object(y.jsx)(b.b,{to:"/",children:Object(y.jsx)("div",{className:"navbar-header header-logo",children:t})}),Object(y.jsxs)("div",{className:"menu navbar-right",children:[this.state.error.length>0&&Object(y.jsx)("a",{children:Object(y.jsx)(v.a,{style:{color:"red"},onClick:this.openErrorModal})}),Object(y.jsx)(b.b,{to:"/account",children:"\u8d26\u6237"}),Object(y.jsx)(b.b,{to:"/stats",children:"\u7edf\u8ba1"}),Object(y.jsx)(b.b,{to:"/events",children:"\u4e8b\u4ef6"}),Object(y.jsx)(b.b,{to:"/setting",children:"\u8bbe\u7f6e"}),Object(y.jsx)("a",{href:m,children:Object(y.jsx)("img",{src:"https://img.shields.io/github/stars/BaoXuebin/beancount-gs?style=social"})})]})]})})}),Object(y.jsx)("div",{className:"main",children:Object(y.jsx)("div",{className:"main-wrap",children:this.props.children})}),Object(y.jsx)("footer",{className:"footer",children:Object(y.jsxs)("div",{className:"copyright",children:["\xa9 ",(new Date).getFullYear(),"\xa0\xa0",Object(y.jsx)("a",{href:`https://github.com/BaoXuebin/beancount-gs/releases/tag/${this.state.version}`,target:"_blank",children:this.state.version}),"\xa0\xa0",Object(y.jsx)("a",{href:O,target:"_blank",children:"MIT"}),"\xa0\xa0",Object(y.jsx)("a",{href:g,target:"_blank",children:"\u4f7f\u7528\u6587\u6863"}),"\xa0\xa0",Object(y.jsx)("a",{href:p,target:"_blank",children:"\u66f4\u65b0\u65e5\u5fd7"}),"\xa0\xa0",Object(y.jsx)("a",{href:x,target:"_blank",children:"\u53cd\u9988BUG"}),"\xa0\xa0",Object(y.jsx)("a",{onClick:this.handleOut,children:"\u9000\u51fa"})]})}),Object(y.jsx)(w.a,{width:860,open:this.state.isModalVisible,onOk:this.closeErrorModal,onCancel:this.closeErrorModal,children:Object(y.jsx)("pre",{children:this.state.error.map((e=>Object(y.jsx)("p",{children:e},e)))})})]})})}}S.contextType=u.a;var I=S,M=n(31),N=n.n(M),k=n(15),Y=n(30);const D=N()({loader:()=>Promise.all([n.e(0),n.e(1),n.e(3),n.e(4),n.e(17)]).then(n.bind(null,463)),loading:Y.a}),E=N()({loader:()=>Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(9)]).then(n.bind(null,459)),loading:Y.a}),P=N()({loader:()=>Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(10)]).then(n.bind(null,460)),loading:Y.a}),B=N()({loader:()=>n.e(18).then(n.bind(null,455)),loading:Y.a}),F=N()({loader:()=>Promise.all([n.e(0),n.e(2),n.e(3),n.e(11),n.e(14)]).then(n.bind(null,464)),loading:Y.a}),T=N()({loader:()=>Promise.all([n.e(0),n.e(2),n.e(7),n.e(20)]).then(n.bind(null,456)),loading:Y.a}),$=N()({loader:()=>Promise.all([n.e(0),n.e(1),n.e(4),n.e(13)]).then(n.bind(null,457)),loading:Y.a}),C=N()({loader:()=>Promise.all([n.e(0),n.e(2),n.e(1),n.e(12),n.e(16)]).then(n.bind(null,466)),loading:Y.a}),_=N()({loader:()=>n.e(19).then(n.bind(null,458)),loading:Y.a}),W=N()({loader:()=>Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(15)]).then(n.bind(null,465)),loading:Y.a});var X=()=>Object(y.jsx)(o.a.Fragment,{children:Object(y.jsxs)(k.c,{children:[Object(y.jsx)(k.a,{exact:!0,path:"/",component:E}),Object(y.jsx)(k.a,{exact:!0,path:"/init",component:$}),Object(y.jsx)(k.a,{exact:!0,path:"/ledger",component:D}),Object(y.jsx)(k.a,{exact:!0,path:"/account",component:P}),Object(y.jsx)(k.a,{exact:!0,path:"/about",component:B}),Object(y.jsx)(k.a,{exact:!0,path:"/edit",component:T}),Object(y.jsx)(k.a,{exact:!0,path:"/stats",component:F}),Object(y.jsx)(k.a,{exact:!0,path:"/import",component:C}),Object(y.jsx)(k.a,{exact:!0,path:"/setting",component:_}),Object(y.jsx)(k.a,{exact:!0,path:"/events",component:W}),Object(y.jsx)(k.a,{component:E})]})});d.a.locale("zh-cn");class U extends r.Component{constructor(){super(...arguments),this.state={theme:localStorage.getItem("theme")||"light"},this.toggleTheme=e=>{this.setState({theme:e})}}render(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(u.a.Provider,{value:{theme:this.state.theme,toggleTheme:this.toggleTheme},children:Object(y.jsx)(i.a,{locale:l.a,children:Object(y.jsx)(b.a,{children:Object(y.jsx)(I,{children:Object(y.jsx)(X,{})})})})})})}}var V=U;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(y.jsx)(o.a.StrictMode,{children:Object(y.jsx)(V,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()})).catch((e=>{console.error(e.message)}))},30:function(e,t,n){"use strict";n(0),n(176);var r=n(5);t.a=()=>Object(r.jsx)("div",{style:{width:"100%"},className:"lds-rolling",children:Object(r.jsx)("div",{})})},73:function(e,t,n){"use strict";var r=n(0);const o=n.n(r).a.createContext({theme:"light",toggleTheme:()=>{}});t.a=o},91:function(e,t,n){"use strict";n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return h})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"n",(function(){return m})),n.d(t,"k",(function(){return g})),n.d(t,"m",(function(){return p})),n.d(t,"l",(function(){return x})),n.d(t,"c",(function(){return O})),n.d(t,"b",(function(){return f})),n.d(t,"e",(function(){return v})),n.d(t,"g",(function(){return w})),n.d(t,"f",(function(){return y}));var r=n(32),o=n(72),a=n.n(o),s=n(124),i=n.n(s);const c=e=>{const t=e.split(":");return t&&t.length>=1?t[0]:""},l=e=>e.split(":").join("_"),h=e=>{const t=e.split(":");return t&&t.length>=2?t[t.length-1]:""},d={"":"\u5168\u90e8",Income:"\u6536\u5165",Expenses:"\u652f\u51fa",Liabilities:"\u8d1f\u503a",Assets:"\u8d44\u4ea7",Equity:"\u6743\u76ca"},b=e=>e,u=function(e){let{method:t,headers:n,body:o,hintError:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={"Content-Type":"application/json",ledgerId:window.localStorage.getItem("ledgerId")};return new Promise(((c,l)=>{i()(e,{method:t,headers:Object.assign({},s,n),body:JSON.stringify(o)}).then(b).then((e=>e.json())).then((e=>{if(a)return void c(e);const{code:t}=e;200===t?c(e.data):200!==t&&(400===t?r.b.error("\u8bf7\u6c42\u53c2\u6570\u9519\u8bef"):1001===t?r.b.error("\u8d26\u76ee\u4e0d\u5e73\u8861"):1003===t?r.b.error("\u65e0\u6548\u8d26\u6237"):1005===t?r.b.error("\u65e0\u6548\u547d\u4ee4"):1006===t?r.b.error("\u5bc6\u7801\u9519\u8bef"):1007===t?r.b.error("\u8d26\u6237\u5df2\u5b58\u5728"):1008===t?r.b.error("\u5bc6\u94a5\u4e0d\u5339\u914d"):1010===t||401===t?j():r.b.error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5"),l(e))})).catch((e=>{r.b.error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5"),l(e)}))}))},j=()=>{window.localStorage.removeItem("ledgerId"),window.location.href="/web/#/ledger"},m=()=>{window.location.href="/web/#/"},g=()=>a()().format("YYYY-M"),p=()=>a()().subtract(1,"month").format("YYYY-M"),x=(e,t)=>{const n=[];t=parseInt(t,10);const r=new Date(e,t,0).getDate(),o=t<10?"0"+t:t;for(let a=1;a<=r;a++)a<10?n.push(e+"-"+o+"-0"+a):n.push(e+"-"+o+"-"+a);return n},O=(e,t)=>e&&e.length>0?e:t,f=e=>e&&e.length>0?[{value:"",label:d[""]},...e]:e,v=(e,t,n,r)=>{n&&(n.startsWith("Income")||n.startsWith("Expenses")?(e*=-1,r=void 0===r&&!0):n.startsWith("Liabilities")&&(e*=-1));const o=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(e);let a=t;return t&&t.symbol&&(a=t.symbol),(r&&Number(e)>=0?"+":"")+(a?o.replace("$",a):o)},w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:t,maximumFractionDigits:n}).format(e)},y=e=>{if(!e)return e;const t=e.split("-");if(1===t.length)return`${t[0]}\u5e74`;if(2===t.length){const e=t[0],n=1===t[1].length?`0${t[1]}`:t[1];return`${e}\u5e74${parseInt(n)}\u6708`}return a()(e).format("YYYY\u5e74MM\u6708DD\u65e5")}}},[[181,6,8]]]);