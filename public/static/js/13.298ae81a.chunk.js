(this["webpackJsonpbeancount-web"]=this["webpackJsonpbeancount-web"]||[]).push([[13],{135:function(e,t,n){"use strict";var a=n(129),c=n(43),i=n(44),r=n(46),o=n(45),s=n(0),l=n(3);t.a=function(e){return function(t){Object(r.a)(s,t);var n=Object(o.a)(s);function s(){var e;Object(c.a)(this,s);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a))).defaultCommodity={currency:"CNY",symbol:"\uffe5"},e.currentCommodity=window.localStorage.getItem("ledgerCurrency"),e}return Object(i.a)(s,[{key:"render",value:function(){return Object(l.jsx)(e,Object(a.a)(Object(a.a)({},this.props),{},{commodity:this.currentCommodity?JSON.parse(this.currentCommodity):this.defaultCommodity}))}}]),s}(s.Component)}},136:function(e,t,n){var a=n(139).Symbol;e.exports=a},138:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},139:function(e,t,n){var a=n(167),c="object"==typeof self&&self&&self.Object===Object&&self,i=a||c||Function("return this")();e.exports=i},150:function(e,t,n){var a=n(168),c=n(138),i=n(151),r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(c(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=c(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var n=o.test(e);return n||s.test(e)?l(e.slice(2),n?2:8):r.test(e)?NaN:+e}},151:function(e,t,n){var a=n(170),c=n(173);e.exports=function(e){return"symbol"==typeof e||c(e)&&"[object Symbol]"==a(e)}},165:function(e,t,n){var a=n(138),c=n(166),i=n(150),r=Math.max,o=Math.min;e.exports=function(e,t,n){var s,l,u,p,f,d,m=0,b=!1,h=!1,j=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=s,a=l;return s=l=void 0,m=t,p=e.apply(a,n)}function y(e){return m=e,f=setTimeout(g,t),b?v(e):p}function O(e){var n=e-d;return void 0===d||n>=t||n<0||h&&e-m>=u}function g(){var e=c();if(O(e))return x(e);f=setTimeout(g,function(e){var n=t-(e-d);return h?o(n,u-(e-m)):n}(e))}function x(e){return f=void 0,j&&s?v(e):(s=l=void 0,p)}function S(){var e=c(),n=O(e);if(s=arguments,l=this,d=e,n){if(void 0===f)return y(d);if(h)return clearTimeout(f),f=setTimeout(g,t),v(d)}return void 0===f&&(f=setTimeout(g,t)),p}return t=i(t)||0,a(n)&&(b=!!n.leading,u=(h="maxWait"in n)?r(i(n.maxWait)||0,t):u,j="trailing"in n?!!n.trailing:j),S.cancel=function(){void 0!==f&&clearTimeout(f),m=0,s=d=l=f=void 0},S.flush=function(){return void 0===f?p:x(c())},S}},166:function(e,t,n){var a=n(139);e.exports=function(){return a.Date.now()}},167:function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(99))},168:function(e,t,n){var a=n(169),c=/^\s+/;e.exports=function(e){return e?e.slice(0,a(e)+1).replace(c,""):e}},169:function(e,t){var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},170:function(e,t,n){var a=n(136),c=n(171),i=n(172),r=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?c(e):i(e)}},171:function(e,t,n){var a=n(136),c=Object.prototype,i=c.hasOwnProperty,r=c.toString,o=a?a.toStringTag:void 0;e.exports=function(e){var t=i.call(e,o),n=e[o];try{e[o]=void 0;var a=!0}catch(s){}var c=r.call(e);return a&&(t?e[o]=n:delete e[o]),c}},172:function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},173:function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},181:function(e,t,n){"use strict";var a=n(2),c=n(5),i=n(14),r=n(15),o=n(16),s=n(17),l=n(0),u=n(10),p=n.n(u),f=n(128),d=n(165),m=n.n(d),b=n(31),h=n(132),j=n(127),v=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(n[a[c]]=e[a[c]])}return n},y=(Object(h.a)("small","default","large"),null);var O=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;Object(i.a)(this,n),(r=t.call(this,e)).debouncifyUpdateSpinning=function(e){var t=(e||r.props).delay;t&&(r.cancelExistingSpin(),r.updateSpinning=m()(r.originalUpdateSpinning,t))},r.updateSpinning=function(){var e=r.props.spinning;r.state.spinning!==e&&r.setState({spinning:e})},r.renderSpin=function(e){var t,n=e.direction,i=r.props,o=i.spinPrefixCls,s=i.className,u=i.size,d=i.tip,m=i.wrapperClassName,b=i.style,h=v(i,["spinPrefixCls","className","size","tip","wrapperClassName","style"]),O=r.state.spinning,g=p()(o,(t={},Object(c.a)(t,"".concat(o,"-sm"),"small"===u),Object(c.a)(t,"".concat(o,"-lg"),"large"===u),Object(c.a)(t,"".concat(o,"-spinning"),O),Object(c.a)(t,"".concat(o,"-show-text"),!!d),Object(c.a)(t,"".concat(o,"-rtl"),"rtl"===n),t),s),x=Object(f.a)(h,["spinning","delay","indicator","prefixCls"]),S=l.createElement("div",Object(a.a)({},x,{style:b,className:g,"aria-live":"polite","aria-busy":O}),function(e,t){var n=t.indicator,a="".concat(e,"-dot");return null===n?null:Object(j.b)(n)?Object(j.a)(n,{className:p()(n.props.className,a)}):Object(j.b)(y)?Object(j.a)(y,{className:p()(y.props.className,a)}):l.createElement("span",{className:p()(a,"".concat(e,"-dot-spin"))},l.createElement("i",{className:"".concat(e,"-dot-item")}),l.createElement("i",{className:"".concat(e,"-dot-item")}),l.createElement("i",{className:"".concat(e,"-dot-item")}),l.createElement("i",{className:"".concat(e,"-dot-item")}))}(o,r.props),d?l.createElement("div",{className:"".concat(o,"-text")},d):null);if(r.isNestedPattern()){var N=p()("".concat(o,"-container"),Object(c.a)({},"".concat(o,"-blur"),O));return l.createElement("div",Object(a.a)({},x,{className:p()("".concat(o,"-nested-loading"),m)}),O&&l.createElement("div",{key:"loading"},S),l.createElement("div",{className:N,key:"container"},r.props.children))}return S};var o=e.spinning,s=function(e,t){return!!e&&!!t&&!isNaN(Number(t))}(o,e.delay);return r.state={spinning:o&&!s},r.originalUpdateSpinning=r.updateSpinning,r.debouncifyUpdateSpinning(e),r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.updateSpinning()}},{key:"componentDidUpdate",value:function(){this.debouncifyUpdateSpinning(),this.updateSpinning()}},{key:"componentWillUnmount",value:function(){this.cancelExistingSpin()}},{key:"cancelExistingSpin",value:function(){var e=this.updateSpinning;e&&e.cancel&&e.cancel()}},{key:"isNestedPattern",value:function(){return!(!this.props||"undefined"===typeof this.props.children)}},{key:"render",value:function(){return l.createElement(b.a,null,this.renderSpin)}}]),n}(l.Component);O.defaultProps={spinning:!0,size:"default",wrapperClassName:""};var g=function(e){var t=e.prefixCls,n=(0,l.useContext(b.b).getPrefixCls)("spin",t),c=Object(a.a)(Object(a.a)({},e),{spinPrefixCls:n});return l.createElement(O,c)};g.setDefaultIndicator=function(e){y=e},t.a=g},203:function(e,t,n){"use strict";function a(e){return Object.keys(e).reduce((function(t,n){return!n.startsWith("data-")&&!n.startsWith("aria-")&&"role"!==n||n.startsWith("data-__")||(t[n]=e[n]),t}),{})}n.d(t,"a",(function(){return a}))},415:function(e,t,n){"use strict";var a=n(2),c=n(5),i=n(7),r=n(0),o=n(69),s=n(77),l=n(80),u=n(78),p=n(79),f=n(75),d=n(81),m=n(85),b=n(72),h=n(157),j=n(10),v=n.n(j),y=n(31),O=n(203),g=n(14),x=n(15),S=n(16),N=n(17),k=function(e){Object(S.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(g.a)(this,n),(e=t.apply(this,arguments)).state={error:void 0,info:{componentStack:""}},e}return Object(x.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t})}},{key:"render",value:function(){var e=this.props,t=e.message,n=e.description,a=e.children,c=this.state,i=c.error,o=c.info,s=o&&o.componentStack?o.componentStack:null,l="undefined"===typeof t?(i||"").toString():t,u="undefined"===typeof n?s:n;return i?r.createElement(T,{type:"error",message:l,description:r.createElement("pre",null,u)}):a}}]),n}(r.Component),w=n(127),C=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(n[a[c]]=e[a[c]])}return n},E={success:f.a,info:m.a,error:b.a,warning:d.a},P={success:s.a,info:u.a,error:p.a,warning:l.a},I=function(e){var t,n=e.description,s=e.prefixCls,l=e.message,u=e.banner,p=e.className,f=void 0===p?"":p,d=e.style,m=e.onMouseEnter,b=e.onMouseLeave,j=e.onClick,g=e.afterClose,x=e.showIcon,S=e.closable,N=e.closeText,k=e.closeIcon,I=void 0===k?r.createElement(o.a,null):k,T=e.action,q=C(e,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action"]),M=r.useState(!1),R=Object(i.a)(M,2),D=R[0],U=R[1],F=r.useRef(),L=r.useContext(y.b),W=L.getPrefixCls,A=L.direction,B=W("alert",s),V=function(e){var t;U(!0),null===(t=q.onClose)||void 0===t||t.call(q,e)},z=!!N||S,$=function(){var e=q.type;return void 0!==e?e:u?"warning":"info"}(),J=!(!u||void 0!==x)||x,_=v()(B,"".concat(B,"-").concat($),(t={},Object(c.a)(t,"".concat(B,"-with-description"),!!n),Object(c.a)(t,"".concat(B,"-no-icon"),!J),Object(c.a)(t,"".concat(B,"-banner"),!!u),Object(c.a)(t,"".concat(B,"-rtl"),"rtl"===A),t),f),H=Object(O.a)(q);return r.createElement(h.b,{visible:!D,motionName:"".concat(B,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(e){return{maxHeight:e.offsetHeight}},onLeaveEnd:g},(function(e){var t=e.className,i=e.style;return r.createElement("div",Object(a.a)({ref:F,"data-show":!D,className:v()(_,t),style:Object(a.a)(Object(a.a)({},d),i),onMouseEnter:m,onMouseLeave:b,onClick:j,role:"alert"},H),J?function(){var e=q.icon,t=(n?P:E)[$]||null;return e?Object(w.c)(e,r.createElement("span",{className:"".concat(B,"-icon")},e),(function(){return{className:v()("".concat(B,"-icon"),Object(c.a)({},e.props.className,e.props.className))}})):r.createElement(t,{className:"".concat(B,"-icon")})}():null,r.createElement("div",{className:"".concat(B,"-content")},l?r.createElement("div",{className:"".concat(B,"-message")},l):null,n?r.createElement("div",{className:"".concat(B,"-description")},n):null),T?r.createElement("div",{className:"".concat(B,"-action")},T):null,z?r.createElement("button",{type:"button",onClick:V,className:"".concat(B,"-close-icon"),tabIndex:0},N?r.createElement("span",{className:"".concat(B,"-close-text")},N):I):null)}))};I.ErrorBoundary=k;var T=t.a=I},424:function(e,t,n){"use strict";n.r(t);var a=n(43),c=n(44),i=n(46),r=n(45),o=n(415),s=n(159),l=n(302),u=n(427),p=n(432),f=n(181),d=n(0),m=n.n(d),b=n(67),h=n(48),j=n(135),v=n(3),y={required:"${label} \u4e0d\u80fd\u4e3a\u7a7a\uff01"},O=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(){var e;Object(a.a)(this,n);for(var c=arguments.length,i=new Array(c),r=0;r<c;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).formRef=m.a.createRef(),e.state={loading:!1,checkStatus:"loading",showForm:!1,config:{}},e.checkReq=function(){e.setState({loading:!0}),Object(b.b)("/api/check",{method:"POST"}).then((function(t){e.setState({checkStatus:"ok"})})).catch((function(){e.setState({checkStatus:"error"})})).finally((function(){e.setState({loading:!1})}))},e.handleNextStep=function(){e.setState({loading:!0}),Object(b.b)("/api/config",{method:"GET"}).then((function(t){e.setState({config:t,showForm:!0})})).finally((function(){e.setState({loading:!1})}))},e.handleReCheck=function(){e.checkReq()},e.handleSubmitServerConfig=function(t){e.setState({loading:!0}),Object(b.b)("/api/config",{method:"POST",body:t}).then((function(){e.props.history.replace("/ledger")})).finally((function(){e.setState({loading:!1})}))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.checkReq()}},{key:"render",value:function(){return"error"===this.state.checkStatus?Object(v.jsxs)("div",{children:[Object(v.jsx)(o.a,{message:"\u68c0\u6d4b\u5931\u8d25",description:"\u4f9d\u8d56\u672a\u5b89\u88c5\uff0c\u8bf7\u5148\u5b89\u88c5 beancount",type:"error",showIcon:!0}),Object(v.jsx)("div",{style:{marginTop:"1rem"},children:Object(v.jsx)(s.a,{block:!0,type:"danger",loading:this.state.loading,onClick:this.handleReCheck,children:"\u91cd\u65b0\u68c0\u6d4b"})}),Object(v.jsx)("div",{style:{marginTop:"1rem"},children:Object(v.jsx)("a",{href:"https://www.yuque.com/chuyi-ble7p/beancount-ns/sqwwqa#RwqnF",target:"_blank",children:"\u600e\u4e48\u5b89\u88c5 beancount ?"})})]}):"ok"===this.state.checkStatus?this.state.showForm?Object(v.jsx)("div",{children:Object(v.jsxs)(l.a,{name:"init-form",className:"page-form",size:"middle",layout:"vertical",style:{textAlign:"left"},ref:this.formRef,onFinish:this.handleSubmitServerConfig,validateMessages:y,children:[Object(v.jsx)(l.a.Item,{label:"\u8d26\u672c\u5b58\u50a8\u4f4d\u7f6e",name:"dataPath",initialValue:this.state.config.dataPath,rules:[{required:!0}],children:Object(v.jsx)(u.a,{placeholder:"\u8d26\u672c\u5b58\u50a8\u4f4d\u7f6e"})}),Object(v.jsx)(l.a.Item,{label:"\u8d26\u672c\u5f00\u59cb\u65e5\u671f",name:"startDate",initialValue:this.state.config.startDate,rules:[{required:!0}],children:Object(v.jsx)(u.a,{type:"date",placeholder:"\u8d26\u672c\u5f00\u59cb\u65e5\u671f"})}),Object(v.jsx)(l.a.Item,{label:"\u5e01\u79cd",name:"operatingCurrency",initialValue:this.state.config.operatingCurrency,rules:[{required:!0}],children:Object(v.jsx)(u.a,{placeholder:"\u5e01\u79cd"})}),Object(v.jsx)(l.a.Item,{label:"\u5e73\u8861\u8d26\u6237\u540d\u79f0\u8bbe\u7f6e",name:"openingBalances",initialValue:this.state.config.openingBalances,rules:[{required:!0}],children:Object(v.jsx)(u.a,{placeholder:"\u5e73\u8861\u8d26\u6237\u540d\u79f0\u8bbe\u7f6e"})}),Object(v.jsx)(l.a.Item,{label:"\u4fee\u6539\u6e90\u6587\u4ef6\u65f6\u662f\u5426\u5907\u4efd\u6570\u636e",name:"isBak",valuePropName:"checked",initialValue:this.state.config.isBak,children:Object(v.jsx)(p.a,{})}),Object(v.jsx)(l.a.Item,{label:"\u5bc6\u94a5",name:"secret",rules:[{required:!0}],children:Object(v.jsx)(u.a.Password,{placeholder:"\u5bc6\u94a5"})}),Object(v.jsx)(l.a.Item,{children:Object(v.jsx)(s.a,{block:!0,type:"primary",htmlType:"submit",loading:this.state.loading,className:"submit-button",children:"\u786e\u8ba4"})})]})}):Object(v.jsxs)("div",{children:[Object(v.jsx)(o.a,{message:"\u68c0\u6d4b\u901a\u8fc7",description:"beancount\u5df2\u5b89\u88c5\uff0c\u70b9\u51fb\u4e0b\u4e00\u6b65\u6765\u5b8c\u6210\u521d\u59cb\u914d\u7f6e",type:"success",showIcon:!0}),Object(v.jsx)("div",{style:{marginTop:"1rem"}}),Object(v.jsx)(s.a,{type:"primary",block:!0,onClick:this.handleNextStep,children:"\u4e0b\u4e00\u6b65"})]}):Object(v.jsx)(f.a,{tip:"Loading...",children:Object(v.jsx)(o.a,{message:"\u68c0\u6d4b\u4e2d",description:"\u6b63\u5728\u68c0\u6d4b beancount \u662f\u5426\u5df2\u5b89\u88c5",type:"info",showIcon:!0})})}}]),n}(d.Component);O.contextType=h.a,t.default=Object(j.a)(O)}}]);