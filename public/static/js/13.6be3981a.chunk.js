(this["webpackJsonpbeancount-web"]=this["webpackJsonpbeancount-web"]||[]).push([[13],{151:function(e,t,n){"use strict";var a=n(148),c=n(63),r=n(64),o=n(66),i=n(65),s=n(0),l=n(5);t.a=function(e){return function(t){Object(o.a)(s,t);var n=Object(i.a)(s);function s(){var e;Object(c.a)(this,s);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=n.call.apply(n,[this].concat(a))).defaultCommodity={currency:"CNY",symbol:"\uffe5"},e.currentCommodity=window.localStorage.getItem("ledgerCurrency"),e}return Object(r.a)(s,[{key:"render",value:function(){return Object(l.jsx)(e,Object(a.a)(Object(a.a)({},this.props),{},{commodity:this.currentCommodity?JSON.parse(this.currentCommodity):this.defaultCommodity}))}}]),s}(s.Component)}},152:function(e,t,n){var a=n(154).Symbol;e.exports=a},153:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},154:function(e,t,n){var a=n(172),c="object"==typeof self&&self&&self.Object===Object&&self,r=a||c||Function("return this")();e.exports=r},161:function(e,t,n){var a=n(173),c=n(153),r=n(162),o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return NaN;if(c(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=c(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var n=i.test(e);return n||s.test(e)?l(e.slice(2),n?2:8):o.test(e)?NaN:+e}},162:function(e,t,n){var a=n(175),c=n(178);e.exports=function(e){return"symbol"==typeof e||c(e)&&"[object Symbol]"==a(e)}},170:function(e,t,n){var a=n(153),c=n(171),r=n(161),o=Math.max,i=Math.min;e.exports=function(e,t,n){var s,l,u,f,d,p,b=0,m=!1,j=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=s,a=l;return s=l=void 0,b=t,f=e.apply(a,n)}function O(e){return b=e,d=setTimeout(x,t),m?v(e):f}function y(e){var n=e-p;return void 0===p||n>=t||n<0||j&&e-b>=u}function x(){var e=c();if(y(e))return g(e);d=setTimeout(x,function(e){var n=t-(e-p);return j?i(n,u-(e-b)):n}(e))}function g(e){return d=void 0,h&&s?v(e):(s=l=void 0,f)}function N(){var e=c(),n=y(e);if(s=arguments,l=this,p=e,n){if(void 0===d)return O(p);if(j)return clearTimeout(d),d=setTimeout(x,t),v(p)}return void 0===d&&(d=setTimeout(x,t)),f}return t=r(t)||0,a(n)&&(m=!!n.leading,u=(j="maxWait"in n)?o(r(n.maxWait)||0,t):u,h="trailing"in n?!!n.trailing:h),N.cancel=function(){void 0!==d&&clearTimeout(d),b=0,s=p=l=d=void 0},N.flush=function(){return void 0===d?f:g(c())},N}},171:function(e,t,n){var a=n(154);e.exports=function(){return a.Date.now()}},172:function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(119))},173:function(e,t,n){var a=n(174),c=/^\s+/;e.exports=function(e){return e?e.slice(0,a(e)+1).replace(c,""):e}},174:function(e,t){var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},175:function(e,t,n){var a=n(152),c=n(176),r=n(177),o=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?c(e):r(e)}},176:function(e,t,n){var a=n(152),c=Object.prototype,r=c.hasOwnProperty,o=c.toString,i=a?a.toStringTag:void 0;e.exports=function(e){var t=r.call(e,i),n=e[i];try{e[i]=void 0;var a=!0}catch(s){}var c=o.call(e);return a&&(t?e[i]=n:delete e[i]),c}},177:function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},178:function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},186:function(e,t,n){"use strict";var a=n(2),c=n(3),r=n(4),o=n(8),i=n.n(o),s=n(170),l=n.n(s),u=n(67),f=n(0),d=n(36),p=n(52),b=n(41),m=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(n[a[c]]=e[a[c]])}return n},j=(Object(b.a)("small","default","large"),null);var h=function(e){var t=e.spinPrefixCls,n=e.spinning,o=void 0===n||n,s=e.delay,b=e.className,h=e.size,v=void 0===h?"default":h,O=e.tip,y=e.wrapperClassName,x=e.style,g=e.children,N=m(e,["spinPrefixCls","spinning","delay","className","size","tip","wrapperClassName","style","children"]),C=f.useState((function(){return o&&!function(e,t){return!!e&&!!t&&!isNaN(Number(t))}(o,s)})),S=Object(r.a)(C,2),w=S[0],k=S[1];f.useEffect((function(){var e=l()((function(){k(o)}),s);return e(),function(){var t;null===(t=null===e||void 0===e?void 0:e.cancel)||void 0===t||t.call(e)}}),[s,o]);var E=function(n){var r,o=n.direction,s=i()(t,(r={},Object(c.a)(r,"".concat(t,"-sm"),"small"===v),Object(c.a)(r,"".concat(t,"-lg"),"large"===v),Object(c.a)(r,"".concat(t,"-spinning"),w),Object(c.a)(r,"".concat(t,"-show-text"),!!O),Object(c.a)(r,"".concat(t,"-rtl"),"rtl"===o),r),b),l=Object(u.a)(N,["indicator","prefixCls"]),d=f.createElement("div",Object(a.a)({},l,{style:x,className:s,"aria-live":"polite","aria-busy":w}),function(e,t){var n=t.indicator,a="".concat(e,"-dot");return null===n?null:Object(p.c)(n)?Object(p.a)(n,{className:i()(n.props.className,a)}):Object(p.c)(j)?Object(p.a)(j,{className:i()(j.props.className,a)}):f.createElement("span",{className:i()(a,"".concat(e,"-dot-spin"))},f.createElement("i",{className:"".concat(e,"-dot-item")}),f.createElement("i",{className:"".concat(e,"-dot-item")}),f.createElement("i",{className:"".concat(e,"-dot-item")}),f.createElement("i",{className:"".concat(e,"-dot-item")}))}(t,e),O?f.createElement("div",{className:"".concat(t,"-text")},O):null);if("undefined"!==typeof g){var m=i()("".concat(t,"-container"),Object(c.a)({},"".concat(t,"-blur"),w));return f.createElement("div",Object(a.a)({},l,{className:i()("".concat(t,"-nested-loading"),y)}),w&&f.createElement("div",{key:"loading"},d),f.createElement("div",{className:m,key:"container"},g))}return d};return f.createElement(d.a,null,E)},v=function(e){var t=e.prefixCls,n=(0,f.useContext(d.b).getPrefixCls)("spin",t),c=Object(a.a)(Object(a.a)({},e),{spinPrefixCls:n});return f.createElement(h,Object(a.a)({},c))};v.setDefaultIndicator=function(e){j=e},t.a=v},203:function(e,t,n){"use strict";function a(e){return Object.keys(e).reduce((function(t,n){return!n.startsWith("data-")&&!n.startsWith("aria-")&&"role"!==n||n.startsWith("data-__")||(t[n]=e[n]),t}),{})}n.d(t,"a",(function(){return a}))},421:function(e,t,n){"use strict";var a=n(2),c=n(4),r=n(3),o=n(99),i=n(75),s=n(97),l=n(77),u=n(69),f=n(101),d=n(59),p=n(106),b=n(76),m=n(8),j=n.n(m),h=n(32),v=n(0),O=n(36),y=n(203),x=n(52),g=n(15),N=n(16),C=n(22),S=n(23),w=function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(){var e;return Object(g.a)(this,n),(e=t.apply(this,arguments)).state={error:void 0,info:{componentStack:""}},e}return Object(N.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t})}},{key:"render",value:function(){var e=this.props,t=e.message,n=e.description,a=e.children,c=this.state,r=c.error,o=c.info,i=o&&o.componentStack?o.componentStack:null,s="undefined"===typeof t?(r||"").toString():t,l="undefined"===typeof n?i:n;return r?v.createElement(M,{type:"error",message:s,description:v.createElement("pre",null,l)}):a}}]),n}(v.Component),k=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(a=Object.getOwnPropertySymbols(e);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(n[a[c]]=e[a[c]])}return n},E={success:o.a,info:p.a,error:s.a,warning:f.a},I={success:i.a,info:b.a,error:l.a,warning:d.a},T=function(e){var t=e.description,n=e.icon,a=e.prefixCls,c=e.type,o=(t?I:E)[c]||null;return n?Object(x.d)(n,v.createElement("span",{className:"".concat(a,"-icon")},n),(function(){return{className:j()("".concat(a,"-icon"),Object(r.a)({},n.props.className,n.props.className))}})):v.createElement(o,{className:"".concat(a,"-icon")})},P=function(e){var t=e.isClosable,n=e.closeText,a=e.prefixCls,c=e.closeIcon,r=e.handleClose;return t?v.createElement("button",{type:"button",onClick:r,className:"".concat(a,"-close-icon"),tabIndex:0},n?v.createElement("span",{className:"".concat(a,"-close-text")},n):c):null},q=function(e){var t,n=e.description,o=e.prefixCls,i=e.message,s=e.banner,l=e.className,f=void 0===l?"":l,d=e.style,p=e.onMouseEnter,b=e.onMouseLeave,m=e.onClick,x=e.afterClose,g=e.showIcon,N=e.closable,C=e.closeText,S=e.closeIcon,w=void 0===S?v.createElement(u.a,null):S,E=e.action,I=k(e,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action"]),q=v.useState(!1),M=Object(c.a)(q,2),R=M[0],F=M[1],D=v.useRef(),L=v.useContext(O.b),A=L.getPrefixCls,B=L.direction,V=A("alert",o),W=function(e){var t;F(!0),null===(t=I.onClose)||void 0===t||t.call(I,e)},$=!!C||N,z=function(){var e=I.type;return void 0!==e?e:s?"warning":"info"}(),J=!(!s||void 0!==g)||g,_=j()(V,"".concat(V,"-").concat(z),(t={},Object(r.a)(t,"".concat(V,"-with-description"),!!n),Object(r.a)(t,"".concat(V,"-no-icon"),!J),Object(r.a)(t,"".concat(V,"-banner"),!!s),Object(r.a)(t,"".concat(V,"-rtl"),"rtl"===B),t),f),H=Object(y.a)(I);return v.createElement(h.b,{visible:!R,motionName:"".concat(V,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(e){return{maxHeight:e.offsetHeight}},onLeaveEnd:x},(function(e){var t=e.className,c=e.style;return v.createElement("div",Object(a.a)({ref:D,"data-show":!R,className:j()(_,t),style:Object(a.a)(Object(a.a)({},d),c),onMouseEnter:p,onMouseLeave:b,onClick:m,role:"alert"},H),J?v.createElement(T,{description:n,icon:I.icon,prefixCls:V,type:z}):null,v.createElement("div",{className:"".concat(V,"-content")},i?v.createElement("div",{className:"".concat(V,"-message")},i):null,n?v.createElement("div",{className:"".concat(V,"-description")},n):null),E?v.createElement("div",{className:"".concat(V,"-action")},E):null,v.createElement(P,{isClosable:!!$,closeText:C,prefixCls:V,closeIcon:w,handleClose:W}))}))};q.ErrorBoundary=w;var M=t.a=q},431:function(e,t,n){"use strict";n.r(t);var a=n(63),c=n(64),r=n(66),o=n(65),i=n(421),s=n(57),l=n(302),u=n(180),f=n(435),d=n(440),p=n(186),b=n(212),m=n(0),j=n.n(m),h=n(87),v=n(71),O=n(151),y=n(5),x={required:"${label} \u4e0d\u80fd\u4e3a\u7a7a\uff01"},g=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var c=arguments.length,r=new Array(c),o=0;o<c;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).formRef=j.a.createRef(),e.state={loading:!1,checkStatus:"loading",showForm:!1,config:{}},e.checkReq=function(){e.setState({loading:!0}),Object(h.b)("/api/check",{method:"POST"}).then((function(t){e.setState({checkStatus:"ok"})})).catch((function(){e.setState({checkStatus:"error"})})).finally((function(){e.setState({loading:!1})}))},e.handleNextStep=function(){e.setState({loading:!0}),Object(h.b)("/api/config",{method:"GET"}).then((function(t){e.setState({config:t,showForm:!0})})).finally((function(){e.setState({loading:!1})}))},e.handleReCheck=function(){e.checkReq()},e.handleSubmitServerConfig=function(t){e.setState({loading:!0}),Object(h.b)("/api/config",{method:"POST",body:t}).then((function(){e.props.history.replace("/ledger")})).finally((function(){e.setState({loading:!1})}))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.checkReq()}},{key:"render",value:function(){return"error"===this.state.checkStatus?Object(y.jsxs)("div",{children:[Object(y.jsx)(i.a,{message:"\u68c0\u6d4b\u5931\u8d25",description:"\u4f9d\u8d56\u672a\u5b89\u88c5\uff0c\u8bf7\u5148\u5b89\u88c5 beancount",type:"error",showIcon:!0}),Object(y.jsx)("div",{style:{marginTop:"1rem"},children:Object(y.jsx)(s.a,{block:!0,type:"danger",loading:this.state.loading,onClick:this.handleReCheck,children:"\u91cd\u65b0\u68c0\u6d4b"})}),Object(y.jsx)("div",{style:{marginTop:"1rem"},children:Object(y.jsx)("a",{href:"https://www.yuque.com/chuyi-ble7p/beancount-ns/sqwwqa#RwqnF",target:"_blank",children:"\u600e\u4e48\u5b89\u88c5 beancount ?"})})]}):"ok"===this.state.checkStatus?this.state.showForm?Object(y.jsx)("div",{children:Object(y.jsxs)(l.a,{name:"init-form",className:"page-form",size:"middle",layout:"vertical",style:{textAlign:"left"},ref:this.formRef,onFinish:this.handleSubmitServerConfig,validateMessages:x,children:[Object(y.jsx)(l.a.Item,{label:Object(y.jsxs)(m.Fragment,{children:[Object(y.jsx)("span",{children:"\u8d26\u672c\u5b58\u50a8\u4f4d\u7f6e"}),"\xa0",Object(y.jsx)(u.a,{title:"\u5982\u679c\u662fdocker\u5bb9\u5668\u90e8\u7f72\uff0c\u6b64\u5904\u9ed8\u8ba4\u4e3a\uff1a/data/beancount",children:Object(y.jsx)(b.a,{})})]}),name:"dataPath",initialValue:this.state.config.dataPath,rules:[{required:!0}],children:Object(y.jsx)(f.a,{placeholder:"\u8d26\u672c\u5b58\u50a8\u4f4d\u7f6e"})}),Object(y.jsx)(l.a.Item,{label:"\u8d26\u672c\u5f00\u59cb\u65e5\u671f",name:"startDate",initialValue:this.state.config.startDate,rules:[{required:!0}],children:Object(y.jsx)(f.a,{type:"date",placeholder:"\u8d26\u672c\u5f00\u59cb\u65e5\u671f"})}),Object(y.jsx)(l.a.Item,{label:"\u5e01\u79cd",name:"operatingCurrency",initialValue:this.state.config.operatingCurrency,rules:[{required:!0}],children:Object(y.jsx)(f.a,{placeholder:"\u5e01\u79cd"})}),Object(y.jsx)(l.a.Item,{label:"\u5e73\u8861\u8d26\u6237\u540d\u79f0\u8bbe\u7f6e",name:"openingBalances",initialValue:this.state.config.openingBalances,rules:[{required:!0}],children:Object(y.jsx)(f.a,{placeholder:"\u5e73\u8861\u8d26\u6237\u540d\u79f0\u8bbe\u7f6e"})}),Object(y.jsx)(l.a.Item,{label:"\u4fee\u6539\u6e90\u6587\u4ef6\u65f6\u662f\u5426\u5907\u4efd\u6570\u636e",name:"isBak",valuePropName:"checked",initialValue:this.state.config.isBak,children:Object(y.jsx)(d.a,{})}),Object(y.jsx)(l.a.Item,{label:Object(y.jsxs)(m.Fragment,{children:[Object(y.jsx)("span",{children:"\u5bc6\u94a5"}),"\xa0",Object(y.jsx)(u.a,{title:"\u53ef\u4ee5\u5728\u542f\u52a8\u65e5\u5fd7\u4e2d\u67e5\u770b",children:Object(y.jsx)(b.a,{})})]}),name:"secret",rules:[{required:!0}],children:Object(y.jsx)(f.a.Password,{placeholder:"\u5bc6\u94a5"})}),Object(y.jsx)(l.a.Item,{children:Object(y.jsx)(s.a,{block:!0,type:"primary",htmlType:"submit",loading:this.state.loading,className:"submit-button",children:"\u786e\u8ba4"})})]})}):Object(y.jsxs)("div",{children:[Object(y.jsx)(i.a,{message:"\u68c0\u6d4b\u901a\u8fc7",description:"beancount\u5df2\u5b89\u88c5\uff0c\u70b9\u51fb\u4e0b\u4e00\u6b65\u6765\u5b8c\u6210\u521d\u59cb\u914d\u7f6e",type:"success",showIcon:!0}),Object(y.jsx)("div",{style:{marginTop:"1rem"}}),Object(y.jsx)(s.a,{type:"primary",block:!0,onClick:this.handleNextStep,children:"\u4e0b\u4e00\u6b65"})]}):Object(y.jsx)(p.a,{tip:"Loading...",children:Object(y.jsx)(i.a,{message:"\u68c0\u6d4b\u4e2d",description:"\u6b63\u5728\u68c0\u6d4b beancount \u662f\u5426\u5df2\u5b89\u88c5",type:"info",showIcon:!0})})}}]),n}(m.Component);g.contextType=v.a,t.default=Object(O.a)(g)}}]);