(this["webpackJsonpbeancount-web"]=this["webpackJsonpbeancount-web"]||[]).push([[15],{204:function(t,e,n){},573:function(t,e,n){"use strict";n.r(e);var r=n(11),a=n(12),i=n(14),c=n(13),s=n(561),o=n(562),u=n(569),l=n(0),h=n(548),d=n(1),b=function(t){Object(i.a)(n,t);var e=Object(c.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(t=e.call.apply(e,[this].concat(i))).chart=null,t}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.chart=new h.a({container:this.chartRef,autoFit:!0,height:500}),this.chart.interval().adjust("stack").position("value").color("type",["#063d8a","#1770d6","#47abfc","#38c060"]).style({opacity:.4}).state({active:{style:function(t){var e=t.shape;return{matrix:h.b.zoom(e,1.1)}}}}).label("type",(function(t){return{offset:-30,style:{opacity:"\u56db\u7ebf\u53ca\u4ee5\u4e0b"===t?1:.5,fill:"white",fontSize:12,shadowBlur:2,shadowColor:"rgba(0, 0, 0, .45)"},content:function(t){return t.type+"\n"+t.value+"%"}}})),this.chart.interaction("element-single-selected"),this.chart.render()}},{key:"render",value:function(){var t=this;return Object(d.jsx)("div",{ref:function(e){return t.chartRef=e}})}}]),n}(l.Component),f=n(73),p=n(15),j=n(64),g=(n(204),function(t){Object(i.a)(n,t);var e=Object(c.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(t=e.call.apply(e,[this].concat(i))).theme=t.context.theme,t.ledgerId=window.localStorage.getItem("ledgerId"),t.state={loading:!1,Assets:0,Income:0,Expenses:0,Liabilities:0},t.queryStatsTotalAmount=function(){t.setState({loading:!0}),Object(f.b)("/api/auth/stats/total").then((function(e){var n=e.Income,r=e.Expenses,a=e.Liabilities,i=e.Assets;t.setState({Assets:i,Income:n,Expenses:r,Liabilities:a})})).catch(console.error).finally((function(){t.setState({loading:!1})}))},t.queryStatsSubAccountPercent=function(){t.setState({loading:!0}),Object(f.b)("/api/auth/stats/account/percent?prefix=Assets").then((function(t){console.log(t)})).finally((function(){t.setState({loading:!1})}))},t}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.queryStatsTotalAmount(),this.queryStatsSubAccountPercent()}},{key:"render",value:function(){this.context.theme!==this.theme&&(this.theme=this.context.theme);var t=this.state.loading;return Object(d.jsxs)("div",{className:"assets-stats-page",style:{textAlign:"center"},children:[Object(d.jsx)("h1",{children:"\u8d44\u4ea7\u7edf\u8ba1"}),Object(d.jsx)("div",{children:Object(d.jsx)(s.a,{gutter:16,children:Object(d.jsx)(o.a,{span:24,children:Object(d.jsx)(u.a,{style:{cursor:"pointer"},title:"".concat(f.a.Assets,"\u7d2f\u8ba1"),value:this.state.Assets||0,loading:t,suffix:"CNY"})})})}),Object(d.jsx)("h1",{children:"\u5206\u5e03\u5360\u6bd4"}),Object(d.jsx)("div",{children:Object(d.jsx)(s.a,{gutter:16,children:Object(d.jsx)(o.a,{span:24,children:Object(d.jsx)(b,{})})})})]})}}]),n}(l.Component));g.contextType=p.a;e.default=Object(j.a)(g)},64:function(t,e,n){"use strict";var r=n(86),a=n(11),i=n(12),c=n(14),s=n(13),o=n(0),u=n(1);e.a=function(t){return function(e){Object(c.a)(o,e);var n=Object(s.a)(o);function o(){return Object(a.a)(this,o),n.apply(this,arguments)}return Object(i.a)(o,[{key:"render",value:function(){return Object(u.jsx)(t,Object(r.a)({},this.props))}}]),o}(o.Component)}},73:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return s})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return h}));var r=n(558),a=n(88),i=n.n(a),c=function(t){var e=t.split(":");return e&&e.length>=1?t.split(":")[0]:""},s=function(t){var e=t.split(":");return e&&2===e.length?t.split(":")[1]:e&&e.length>=3?t.split(":")[e.length-2]:""},o=function(t){var e=t.split(":");return e&&e.length>=2?t.split(":")[e.length-1]:""},u={Income:"\u6536\u5165",Expenses:"\u652f\u51fa",Liabilities:"\u8d1f\u503a",Assets:"\u8d44\u4ea7"},l=function(t){return t},h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.method,a=e.headers,c=e.body,s={"Content-Type":"application/json",ledgerId:window.localStorage.getItem("ledgerId")};return new Promise((function(e,o){i()(t,{method:n,headers:Object.assign({},s,a),body:JSON.stringify(c)}).then(l).then((function(t){return t.json()})).then((function(t){var n=t.code;200===n?e(t.data):200!==n&&(400===n?r.b.error("\u8bf7\u6c42\u53c2\u6570\u9519\u8bef"):1001===n?r.b.error("\u8d26\u76ee\u4e0d\u5e73\u8861"):1003===n?r.b.error("\u65e0\u6548\u8d26\u6237"):1005===n?r.b.error("\u65e0\u6548\u547d\u4ee4"):1006===n?r.b.error("\u5bc6\u7801\u9519\u8bef"):1010===n?window.location.href="/#/ledger":r.b.error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5"),o(t))})).catch((function(t){r.b.error("\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5"),o(t)}))}))}}}]);